{% extends "base.html" %}

{% block titulo %}
Inicio	
{% endblock titulo %}

{% load widget_tweaks %}

{% block javascript %}
<script>
	$(function () {
		$(document).ready(function() {
			$('#id_tabla').DataTable();
		});
	});
</script>
{% endblock javascript %}

{% block content %}
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css" />
	<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
	<h1>Buscando</h1>
	<form method="get">
		<div class="well">
			<h4 style="margin-top: 0">Filtrar</h4>
			<div class="row">
				<div class="form-group col-sm-4 col-md-3">
				{{ filter.form.ponderacion__lt.label_tag }}
				{% render_field filter.form.ponderacion__lt class="form-control" %}
				</div>
				<div class="form-group col-sm-4 col-md-3">
				{{ filter.form.ponderacion__gt.label_tag }}
				{% render_field filter.form.ponderacion__gt class="form-control" %}
				</div>
				<div class="form-group col-sm-4 col-md-3">
				{{ filter.form.nombre_agente__icontains.label_tag }}
				{% render_field filter.form.nombre_agente__icontains class="form-control" %}
				</div>
				<div class="form-group col-sm-4 col-md-3">
				{{ filter.form.nombre_audio__icontains.label_tag }}
				{% render_field filter.form.nombre_audio__icontains class="form-control" %}
				</div>
				<div class="form-group col-sm-4 col-md-3">
				{{ filter.form.nombre_campaña__icontains.label_tag }}
				{% render_field filter.form.nombre_campaña__icontains class="form-control" %}
				</div>
			</div>
			<button type="submit" class="btn btn-primary">
				<span class="glyphicon glyphicon-search"></span> Buscar
			</button>
		</div>
	</form>
	<hr>
	<h1>Resultado</h1>
	<div>
	<table id="id_tabla" class="table table-striped table-bordered" style="width:100%">
		<thead>
			<tr>
				<th>Nombre</th>
				<th>Fecha</th>
				<th>Campaña</th>
				<th>Agente</th>
				<th>Ponderacion</th>
				<th>Transcripcion</th>
				<th>Reproducir</th>
			</tr>
		</thead>
		<tbody>
			{% for reporte in filter.qs %}
			<tr>
				<td class="expandir" id='id_audio'>{{reporte.nombre_audio}}</td>
				<td>{{reporte.fecha_audio}}</td>
				<td>{{reporte.nombre_campaña}}</td>
				<td>{{reporte.nombre_agente}}</td>
				<td style="text-align:center">{{reporte.ponderacion}} %</td>
				<td style="text-align:center"><a href="/reportes/{{reporte.id}}" class="btn btn-info btn-sm">Transcripción a Texto</a></td>
				<td><a href="/reproducir/{{reporte.nombre_audio}}" class="btn btn-success btn-sm" target="_blank">Reproducir</a></td>
			</tr>
			{% empty %}
			<tr>
				<td colspan="7" class="text-center bg-warning">Sin analisis</td>
			</tr>
			{% endfor %}
		</tbody>
		<tfoot>
			<tr>
				<th>Nombre</th>
				<th>Fecha</th>
				<th>Campaña</th>
				<th>Agente</th>
				<th>Ponderacion</th>
				<th>Transcripcion</th>
				<th>Reproducir</th>
			</tr>
		</tfoot>
	</table>
	</div>
{% endblock content %}